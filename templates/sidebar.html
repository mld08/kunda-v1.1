<div class="flex flex-col flex-1 h-full">
    <!-- Logo -->
    <div class="flex items-center flex-shrink-0 px-4 py-6">
        <div class="flex items-center">
            <div
                class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                <i class="fas fa-chart-bar text-white text-lg"></i>
            </div>
            <h2 class="ml-3 text-xl font-bold text-gray-900">KUNDA</h2>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-2 space-y-2">
        <!-- Dashboard -->
        <a href="{{ url_for('dashboard') }}" class="group flex items-center px-3 py-2 text-sm font-medium rounded-md transition
                  {% if request.endpoint == 'dashboard' %}
                      bg-blue-100 text-blue-700 border-r-2 border-blue-700
                  {% else %}
                      text-gray-700 hover:bg-gray-100 hover:text-gray-900
                  {% endif %}">
            <i
                class="fas fa-tachometer-alt mr-3 text-lg
                     {% if request.endpoint == 'dashboard' %}text-blue-700{% else %}text-gray-400 group-hover:text-gray-500{% endif %}"></i>
            Dashboard
        </a>

        <!-- Bloc Département -->
        <div
            x-data="{ open: {{ 'true' if request.endpoint and request.endpoint.split('_')[0] in ['trading', 'academy', 'digital'] else 'false' }} }">
            <button @click="open = !open"
                class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-building mr-3 text-lg text-gray-400 group-hover:text-gray-500"></i>
                Département
                <i class="fas fa-chevron-right ml-auto text-xs transition-transform duration-200"
                    :class="{'rotate-90': open}"></i>
            </button>
            <div x-show="open" x-transition class="ml-6 space-y-1 overflow-hidden">
                <a href="{{ url_for('trading_list') }}"
                    class="nav-sub {% if request.endpoint == 'trading_list' %}active{% endif %}"><i
                        class="fas fa-chart-line mr-3"></i>Trading</a>
                <a href="{{ url_for('academy_list') }}"
                    class="nav-sub {% if request.endpoint == 'academy_list' %}active{% endif %}"><i
                        class="fas fa-graduation-cap mr-3"></i>Academy</a>
                <a href="{{ url_for('digital_list') }}"
                    class="nav-sub {% if request.endpoint == 'digital_list' %}active{% endif %}"><i
                        class="fas fa-laptop-code mr-3"></i>Digital</a>
            </div>
        </div>

        <!-- Bloc Comptabilité -->
        <div
            x-data="{ open: {{ 'true' if request.endpoint and request.endpoint.split('_')[0] in ['materiel', 'finance'] else 'false' }} }">
            <button @click="open = !open"
                class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-file-invoice-dollar mr-3 text-lg text-gray-400 group-hover:text-gray-500"></i>
                Comptabilité
                <i class="fas fa-chevron-right ml-auto text-xs transition-transform duration-200"
                    :class="{'rotate-90': open}"></i>
            </button>
            <div x-show="open" x-transition class="ml-6 space-y-1 overflow-hidden">
                <a href="{{ url_for('materiel_list') }}"
                    class="nav-sub {% if request.endpoint == 'materiel_list' %}active{% endif %}"><i
                        class="fas fa-box mr-3"></i>Matériel</a>
                <a href="{{ url_for('finance_list') }}"
                    class="nav-sub {% if request.endpoint == 'finance_list' %}active{% endif %}"><i
                        class="fas fa-coins mr-3"></i>Finances</a>
                <a href="#"
                    class="nav-sub {% if request.endpoint == 'facture_list' %}active{% endif %}">
                    <i class="fas fa-file-invoice mr-3"></i>Factures
                </a>
            </div>
        </div>

        <!-- Bloc Ressources -->
        <div
            x-data="{ open: {{ 'true' if request.endpoint and request.endpoint.split('_')[0] in ['projet', 'evenementiel', 'personnel'] else 'false' }} }">
            <button @click="open = !open"
                class="w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-people-carry mr-3 text-lg text-gray-400 group-hover:text-gray-500"></i>
                Ressources
                <i class="fas fa-chevron-right ml-auto text-xs transition-transform duration-200"
                    :class="{'rotate-90': open}"></i>
            </button>
            <div x-show="open" x-transition class="ml-6 space-y-1 overflow-hidden">
                <a href="{{ url_for('personnel_list') }}"
                    class="nav-sub {% if request.endpoint == 'personnel_list' %}active{% endif %}"><i
                        class="fas fa-users mr-3"></i>Personnel</a>
                <a href="{{ url_for('projet_list') }}"
                    class="nav-sub {% if request.endpoint == 'projet_list' %}active{% endif %}"><i
                        class="fas fa-project-diagram mr-3"></i>Projets</a>
                <a href="{{ url_for('evenementiel_list') }}"
                    class="nav-sub {% if request.endpoint == 'evenementiel_list' %}active{% endif %}"><i
                        class="fas fa-calendar-alt mr-3"></i>Événementiel</a>
            </div>
        </div>
    </nav>

    <!-- Footer -->
    <div class="flex-shrink-0 px-4 py-4 border-t border-gray-200">
        <div class="text-xs text-gray-500 text-center">
            <p>&copy; 2025 Kunda</p>
            <p>v1.0.0</p>
        </div>
    </div>
</div>

<!-- Styles pour les sous-liens -->
<style>
    .nav-sub {
        display: flex;
        align-items: center;
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        color: #4B5563;
        border-radius: 0.375rem;
        transition: background-color 0.2s, color 0.2s;
    }

    .nav-sub:hover {
        background-color: #F3F4F6;
        color: #111827;
    }

    .nav-sub.active {
        background-color: #DBEAFE;
        color: #1D4ED8;
        font-weight: 500;
    }
</style>
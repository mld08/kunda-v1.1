{% extends "base.html" %}

{% block title %}Modifier Personnel - Système de Gestion{% endblock %}
{% block page_title %}Modifier un Personnel{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white shadow-sm rounded-lg border border-gray-200">
        <div class="px-6 py-4 border-b border-gray-200">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-lg font-semibold text-gray-900">Informations du personnel</h3>
                    <p class="mt-1 text-sm text-gray-500">Remplissez les informations pour modifier un personnel</p>
                </div>
                <a href="{{ url_for('personnel_list') }}" 
                   class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Retour
                </a>
            </div>
        </div>

        <form method="POST" class="px-6 py-6 space-y-6" x-data="personnelForm()">
            <!-- Personal Information -->
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div>
                    <label for="nom" class="block text-sm font-medium text-gray-700 mb-1">
                        Nom <span class="text-red-500">*</span>
                    </label>
                    <input type="text" 
                           name="nom" 
                           id="nom" 
                           required
                           value="{{ personnel.nom }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300"
                           placeholder="Nom de famille">
                </div>

                <div>
                    <label for="prenom" class="block text-sm font-medium text-gray-700 mb-1">
                        Prénom <span class="text-red-500">*</span>
                    </label>
                    <input type="text" 
                           name="prenom" 
                           id="prenom" 
                           required
                           value="{{ personnel.prenom }}"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300"
                           placeholder="Prénom">
                </div>
            </div>

            <!-- Contact Information -->
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">
                        Email <span class="text-red-500">*</span>
                    </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-envelope text-gray-400"></i>
                        </div>
                        <input type="email" 
                               name="email" 
                               id="email" 
                               required
                               value="{{ personnel.email }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300 pl-10 pr-10"
                               placeholder="email@exemple.com">
                    </div>
                </div>

                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">
                        Téléphone
                    </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-phone text-gray-400"></i>
                        </div>
                        <input type="tel" 
                               name="phone" 
                               id="phone"
                               value="{{ personnel.phone }}"
                               class="block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300 pl-10"
                               placeholder="+221 77 000 00 00">
                    </div>
                </div>
            </div>

            <!-- Account Information -->
            <div class="border-t border-gray-200 pt-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Informations de connexion</h4>
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">
                            Nom d'utilisateur <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-user text-gray-400"></i>
                            </div>
                            <input type="text" 
                                   name="username" 
                                   id="username" 
                                   required
                                   value="{{ personnel.username }}"
                                   class="block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300 pl-10"
                                   placeholder="nom_utilisateur">
                        </div>
                    </div>

                    <div x-data="{ showPassword: false }">
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">
                            Mot de passe 
                        </label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-gray-400"></i>
                            </div>
                            <input :type="showPassword ? 'text' : 'password'" 
                                   name="password" 
                                   id="password" 
                                   class="block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300 pl-10"
                                   placeholder="Mot de passe">
                            <button type="button" 
                                    @click="showPassword = !showPassword"
                                    class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                <i class="fas" :class="showPassword ? 'fa-eye-slash' : 'fa-eye'" 
                                   class="text-gray-400 hover:text-gray-600"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Professional Information -->
            <div class="border-t border-gray-200 pt-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Informations professionnelles</h4>
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                    <div>
                        <label for="departement" class="block text-sm font-medium text-gray-700 mb-1">
                            Département <span class="text-red-500">*</span>
                        </label>
                        <select name="departement" 
                                id="departement" 
                                required
                                class="block w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300">
                            <option value="">Sélectionner un département</option>
                            <option value="Direction" {% if personnel.departement == "Direction" %}selected{% endif %}>Direction</option>
                            <option value="Trading" {% if personnel.departement == "Trading" %}selected{% endif %}>Trading</option>
                            <option value="Academy" {% if personnel.departement == "Academy" %}selected{% endif %}>Academy</option>
                            <option value="Digital" {% if personnel.departement == "Digital" %}selected{% endif %}>Digital</option>
                        </select>
                    </div>

                    <div>
                        <label for="convention" class="block text-sm font-medium text-gray-700 mb-1">
                            Type de convention <span class="text-red-500">*</span>
                        </label>
                        <select name="convention" 
                                id="convention" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300">
                            <option value="">Sélectionner une convention</option>
                            <option value="Stage" {% if personnel.convention == "Stage" %} selected {% endif %}>Stage</option>
                            <option value="CDD" {% if personnel.convention == "CDD" %} selected {% endif %}>CDD</option>
                            <option value="CDI" {% if personnel.convention == "CDI" %} selected {% endif %}>CDI</option>
                        </select>
                    </div>

                    <div>
                        <label for="role" class="block text-sm font-medium text-gray-700 mb-1">
                            Rôle <span class="text-red-500">*</span>
                        </label>
                        <select name="role" 
                                id="role" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300">
                            <option value="">Sélectionner un rôle</option>
                            <option value="Administrator" {% if personnel.role == "Administrator" %} selected {% endif %}>Administrateur</option>
                            <option value="Trading" {% if personnel.role == "Trading" %} selected {% endif %}>Trading</option>
                            <option value="Academy" {% if personnel.role == "Academy" %} selected {% endif %}>Academy</option>
                            <option value="Digital" {% if personnel.role == "Digital" %} selected {% endif %}>Digital</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Dates -->
            <div class="border-t border-gray-200 pt-6">
                <h4 class="text-lg font-medium text-gray-900 mb-4">Dates importantes</h4>
                <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                    <div>
                        <label for="date_arrivee" class="block text-sm font-medium text-gray-700 mb-1">
                            Date d'arrivée <span class="text-red-500">*</span>
                        </label>
                        <input type="date" 
                               name="date_arrivee" 
                               id="date_arrivee" 
                               value="{{ personnel.date_arrivee }}"
                               required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300"> 
                    </div>
                    <div>
                        <label for="date_depart" class="block text-sm font-medium text-gray-700 mb-1">
                            Date de départ
                        </label>
                        <input type="date" 
                               name="date_depart" 
                               id="date_depart"
                               value="{{ personnel.date_depart }}"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-300">
                    </div>
                </div>
            </div>
            <!-- Submit Button -->
            <div class="pt-6">
                <button type="submit" 
                        class="w-full inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-plus mr-2"></i>
                    Ajouter le personnel
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function personnelForm() {
        return {
            showPassword: false,
            loading: false,
            submitForm(event) {
                this.loading = true;
                // Simulate form submission
                setTimeout(() => {
                    this.loading = false;
                    alert('Personnel ajouté avec succès!');
                }, 2000);
            }
        }
    }
</script>
{% endblock %}